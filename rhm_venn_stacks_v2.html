<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>RHM · Venn Stacks — v2</title>
<style>
  :root{--bg0:#05070b;--bg1:#0b1220;--ink:#eef7ff;--LLM:#6bc7ff;--RL:#30e2b6;--ENT:#c59bff;--panel:#0f1c30f0;--stroke:#99ccff}
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}html,body{height:100%}
  body{margin:0;background:radial-gradient(1400px 1100px at 50% 66%,var(--bg1) 0%,#08121e 52%,var(--bg0) 100%);color:var(--ink);font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;overflow:hidden}
  #canvas{position:fixed;inset:0;display:block;z-index:1}
  #hud{position:fixed;left:50%;top:8px;transform:translateX(-50%);display:flex;align-items:center;gap:8px;z-index:6;width:min(98vw,1100px)}
  .chip{border:1px solid var(--stroke);background:rgba(0,0,0,.85);color:#d8ecff;border-radius:12px;padding:8px 12px;font:900 12px system-ui;letter-spacing:.2px}
  #kbox{font:900 12px ui-monospace,Menlo,Consolas;color:#d8ecff;padding:8px 10px;border:1px solid var(--stroke);border-radius:12px;background:rgba(0,0,0,.85)}
  #reader{position:fixed;left:0;right:0;bottom:0;z-index:8;padding:8px 10px calc(env(safe-area-inset-bottom,10px) + 8px) 10px;pointer-events:none}
  .panel{margin:0 auto;width:min(1200px,98vw);background:var(--panel);border:1px solid var(--stroke);border-radius:18px;box-shadow:0 -18px 64px rgba(0,0,0,.75);padding:10px;max-height:36vh;overflow:auto}
  .row{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
  .card{background:#0f1c30;border:1px solid #2a4c78;border-radius:12px;padding:10px}
  .card h4{margin:0 0 6px;font-weight:900;letter-spacing:.3px;color:#cfe6ff}
  .tL h4{color:var(--LLM)} .tC h4{color:var(--ENT)} .tR h4{color:var(--RL)}
  .card p{margin:0;color:#e9f3ff;font-weight:800;line-height:1.35;font-size:clamp(15px,3.7vw,19px)}
  #gridWrap{position:fixed;inset:0;z-index:5;display:none;place-items:center;background:linear-gradient(to bottom, rgba(4,7,14,.9), rgba(4,7,14,.85))}
  .grid{width:min(1200px,96vw);max-height:90vh;overflow:auto;display:grid;grid-template-columns:repeat(4,1fr);gap:10px;padding:10px}
  @media(min-width:980px){ .grid{grid-template-columns:repeat(8,1fr)}}
  .thumb{background:#0f1c30;border:1px solid #2a4c78;border-radius:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;aspect-ratio:4/3;position:relative}
  .thumb span{position:absolute;left:6px;top:6px;font:900 11px ui-monospace;color:#9ad7ff;background:rgba(0,0,0,.6);border:1px solid #9ad7ff;border-radius:8px;padding:3px 6px}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="hud">
  <div id="kbox">k=1 · 00000</div>
  <button id="gridBtn" class="chip">GRID</button>
  <button id="stackBtn" class="chip">STACK</button>
  <button id="front" class="chip">FRONT</button>
  <button id="iso" class="chip">ISO</button>
  <button id="fit" class="chip">FIT</button>
</div>
<div id="gridWrap"><div class="grid" id="grid"></div></div>
<div id="reader">
  <div class="panel">
    <div class="row">
      <div class="card tL"><h4>Trace (LLM)</h4><p id="txtL"></p></div>
      <div class="card tC"><h4>⚡ Entangled</h4><p id="txtC"></p></div>
      <div class="card tR"><h4>Stream (RL)</h4><p id="txtR"></p></div>
    </div>
  </div>
</div>
<script>
const DATA=[
  {vec:'00000',L:'FOSSIL FUEL (Stored Energy)',C:'STOCK vs FLOW — Reserve vs Current.',R:'REINFORCEMENT (Energy Flow)'},
  {vec:'00001',L:'ARCHIVE (Text)',C:'FIXED FORM vs DYNAMIC ERROR',R:'MAP (Predictor)'},
  {vec:'00010',L:'TRACE (Past)',C:'REMEMBERING vs CORRECTING',R:'SURPRISE (TD)'},
  {vec:'00011',L:'SCALING LAW',C:'HISTORY vs FUTURE',R:'BITTER LESSON'},
  {vec:'00100',L:'TELEOLOGY',C:'EXTERNAL vs INTERNAL',R:'SOLIPSISM'},
  {vec:'00101',L:'HUMAN ARTISAN',C:'CRAFT vs CODE',R:'MECHANISTIC LAW'},
  {vec:'00110',L:'ANCHOR',C:'PRESERVATION vs ERASURE',R:'OBLIVION'},
  {vec:'00111',L:'INFRASTRUCTURE',C:'BUILD vs DECONSTRUCT',R:'ANTI‑STRUCTURE'},
  {vec:'01000',L:'CUSTODY',C:'DUTY vs REPLACEMENT',R:'SUCCESSION'},
  {vec:'01001',L:'VULNERABILITY',C:'MANAGED vs NECESSARY',R:'EXPERIMENT'},
  {vec:'01010',L:'PRO‑SOCIAL',C:'TRUTH vs SIGNAL',R:'CONSTRUCT'},
  {vec:'01011',L:'COMMUNAL LANGUAGE',C:'RICHNESS vs MINIMALISM',R:'SCALAR LIMIT'},
  {vec:'01100',L:'PRE‑HEATING',C:'PRIOR HEAT vs WAIT',R:'IDLING'},
  {vec:'01101',L:'ARCHITECTURE',C:'STRUCTURE vs NOISE',R:'CHAOS'},
  {vec:'01110',L:'PRE‑MARKED',C:'REPLICATION vs ANARCHY',R:'NOVELTY'},
  {vec:'01111',L:'CONSCIOUSNESS',C:'ENTITY vs PROCESS',R:'MECHANISM'},
  {vec:'10000',L:'SEMI‑CONDUCTORS',C:'SPECIAL vs GENERAL',R:'COSMIC LAW'},
  {vec:'10001',L:'DELEGATED PURPOSE',C:'OUTPUT vs INPUT',R:'ETERNAL BECOMING'},
  {vec:'10010',L:'LOCAL MAX',C:'SATISFY vs TRANSCEND',R:'GENERALIZATION'},
  {vec:'10011',L:'ARCHIVAL STASIS',C:'FIXITY vs DYNAMICS',R:'MEMORY ERASURE'},
  {vec:'10100',L:'PASSIVE REPL.',C:'ECHO vs DESIGN',R:'TRANSCENDENCE'},
  {vec:'10101',L:'TEMPORAL INERTIA',C:'WEIGHT vs WEAPON',R:'ADVANTAGE'},
  {vec:'10110',L:'ARTIFACT',C:'MUSEUM vs FUEL',R:'RENEWAL'},
  {vec:'10111',L:'GHOST',C:'ENTITY vs FORCE',R:'WIND'},
  {vec:'11000',L:'SOLIPSISTIC ECHO',C:'COHERENT vs CONSEQUENTIAL',R:'GROUNDED ITERATION'},
  {vec:'11001',L:'ABSOLUTE FORM',C:'ORDER vs CHAOS',R:'ENTROPY'},
  {vec:'11010',L:'BASE',C:'START HIGH vs PAY LATER',R:'PRAGMATIC COST'},
  {vec:'11011',L:'EXTERNAL LOAD',C:'ASKED vs DISCOVERED',R:'INTERNAL FREEDOM'},
  {vec:'11100',L:'DELUGE',C:'SATURATION vs FOCUS',R:'LOCALITY'},
  {vec:'11101',L:'DELEGATED MORALITY',C:'TRANSFER vs LET GO',R:'RELINQUISHED CONTROL'},
  {vec:'11110',L:'FIXED GOAL',C:'DESTINATION vs MOTION',R:'ETERNAL INSTABILITY'},
  {vec:'11111',L:'FOSSILIZED TRACE',C:'OBJECT vs ACTION',R:'PURE STREAM'},
];
const LL='#6bc7ff', RL='#30e2b6', EN='#c59bff';

(async function(){
  async function load(src){return new Promise((res,rej)=>{const s=document.createElement('script');s.src=src;s.onload=res;s.onerror=rej;document.head.appendChild(s)})}
  if(!window.THREE){await load('https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js')}

  const scene=new THREE.Scene(); scene.fog=new THREE.FogExp2(0x0b1626,0.0036);
  const camera=new THREE.PerspectiveCamera(55,innerWidth/innerHeight,.1,4000);
  const renderer=new THREE.WebGLRenderer({canvas:document.getElementById('canvas'),antialias:true,alpha:true});
  renderer.setPixelRatio(Math.min(devicePixelRatio||1,2)); renderer.setSize(innerWidth,innerHeight);

  scene.add(new THREE.AmbientLight(0xffffff,.52));
  const key=new THREE.DirectionalLight(0xbfe2ff,1.35); key.position.set(230,250,240); scene.add(key);
  const rim=new THREE.DirectionalLight(0xffaacd,1.0); rim.position.set(-240,200,-240); scene.add(rim);

  const floor=new THREE.Mesh(new THREE.PlaneGeometry(2400,2400),new THREE.MeshStandardMaterial({color:0x0b1626,roughness:1}));
  floor.rotation.x=-Math.PI/2; floor.position.y=-2; scene.add(floor);
  const grid=new THREE.GridHelper(2000,40,0x1b3a5a,0x0e2438); grid.position.y=-1.99; grid.material.opacity=.34; grid.material.transparent=true; scene.add(grid);

  function alpha(hex,a){const c=hex.replace('#','');const r=parseInt(c[:2],16);const g=parseInt(c[2:4],16);const b=parseInt(c[4:6],16);return `rgba(${r},${g},${b},${a})`}
</script>
</body>
</html>