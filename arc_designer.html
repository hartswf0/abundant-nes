<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arc Ring Designer - Alignment Options</title>
  <style>
    *{box-sizing:border-box; margin:0; padding:0}
    body{background:#0a0a0a; color:#0f0; font:14px/1.4 ui-monospace, monospace; padding:20px}
    h1{color:#0ff; margin-bottom:20px}
    .controls{background:#111; border:2px solid #0f0; padding:20px; margin-bottom:20px}
    .option{margin:15px 0; padding:15px; background:#1a1a1a; border-left:4px solid #0f0; cursor:pointer; transition:all .2s}
    .option:hover{background:#222; border-left-width:8px}
    .option.active{background:#1a3a1a; border-left-color:#0ff}
    .option h3{color:#0ff; margin-bottom:8px}
    .option p{color:#888; font-size:12px}
    .preview{display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-top:20px}
    .preview-box{background:#111; border:2px solid #333; padding:20px}
    .preview-box h3{color:#0ff; margin-bottom:15px; text-align:center}
    svg{display:block; margin:0 auto; background:#000}
    .stats{background:#1a1a1a; padding:10px; margin-top:10px; font-size:11px; color:#888}
    button{background:#0f0; color:#000; border:none; padding:10px 20px; font:bold 14px monospace; cursor:pointer; margin:5px}
    button:hover{background:#0ff}
    button:active{transform:translateY(1px)}
  </style>
</head>
<body>

<h1>ðŸŽ¨ Arc Ring Designer - Alignment Interface</h1>

<div class="controls">
  <h2 style="color:#0ff; margin-bottom:15px">Select Arc Design Aesthetic</h2>
  
  <div class="option active" data-mode="proportional">
    <h3>1. Proportional Arcs (Current)</h3>
    <p>Arc length = number of files in group. Large groups get bigger arcs. Natural distribution.</p>
  </div>
  
  <div class="option" data-mode="equal">
    <h3>2. Equal Arcs</h3>
    <p>Each prefix gets same arc length. Clean, uniform, democratic. Easy to scan.</p>
  </div>
  
  <div class="option" data-mode="ticks">
    <h3>3. Tick Marks</h3>
    <p>Individual tick per file, color-coded by prefix. Precise, minimal, technical.</p>
  </div>
  
  <div class="option" data-mode="hybrid">
    <h3>4. Hybrid Bands</h3>
    <p>Thin arcs + tick marks. Shows both grouping and individual files. Maximum info.</p>
  </div>
  
  <div class="option" data-mode="gradient">
    <h3>5. Gradient Blend</h3>
    <p>Smooth color transitions between prefixes. Organic, flowing, artistic.</p>
  </div>
  
  <button onclick="applyToRadio()">Apply to Radio</button>
  <button onclick="exportSVG()">Export SVG</button>
</div>

<div class="preview">
  <div class="preview-box">
    <h3>Current Design</h3>
    <svg id="current" width="400" height="220" viewBox="0 0 400 220"></svg>
    <div class="stats" id="currentStats"></div>
  </div>
  
  <div class="preview-box">
    <h3>Selected Design</h3>
    <svg id="preview" width="400" height="220" viewBox="0 0 400 220"></svg>
    <div class="stats" id="previewStats"></div>
  </div>
</div>

<script>
// Test data
const testFiles = [
  {prefix: 'abu', count: 4, color: '#f77f00'},
  {prefix: 'ais', count: 16, color: '#fcbf49'},
  {prefix: 'bti', count: 4, color: '#ff006e'},
  {prefix: 'exc', count: 2, color: '#3a86ff'},
  {prefix: 'orc', count: 12, color: '#06d6a0'},
  {prefix: 'vol', count: 28, color: '#e63946'}
];

const totalFiles = testFiles.reduce((sum, g) => sum + g.count, 0);
let currentMode = 'proportional';

// Calculate absolute indices
let idx = 0;
testFiles.forEach(group => {
  group.start = idx;
  group.end = idx + group.count - 1;
  idx += group.count;
});

function drawProportional(svg, groups) {
  const cx = 200, cy = 200, R = 170;
  const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
  
  groups.forEach(group => {
    const startDeg = -90 + (group.start / (totalFiles - 1)) * 180;
    const endDeg = -90 + (group.end / (totalFiles - 1)) * 180;
    const startRad = startDeg * Math.PI / 180;
    const endRad = endDeg * Math.PI / 180;
    
    const x1 = cx + Math.cos(startRad) * R;
    const y1 = cy + Math.sin(startRad) * R;
    const x2 = cx + Math.cos(endRad) * R;
    const y2 = cy + Math.sin(endRad) * R;
    
    const arc = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    arc.setAttribute('d', `M ${x1} ${y1} A ${R} ${R} 0 0 1 ${x2} ${y2}`);
    arc.setAttribute('stroke', group.color);
    arc.setAttribute('stroke-width', '12');
    arc.setAttribute('fill', 'none');
    arc.setAttribute('opacity', '0.8');
    g.appendChild(arc);
  });
  
  svg.appendChild(g);
  return `Proportional: ${groups.length} groups, ${totalFiles} files`;
}

function drawEqual(svg, groups) {
  const cx = 200, cy = 200, R = 170;
  const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
  const arcSize = 180 / groups.length;
  
  groups.forEach((group, i) => {
    const startDeg = -90 + (i * arcSize);
    const endDeg = -90 + ((i + 1) * arcSize);
    const startRad = startDeg * Math.PI / 180;
    const endRad = endDeg * Math.PI / 180;
    
    const x1 = cx + Math.cos(startRad) * R;
    const y1 = cy + Math.sin(startRad) * R;
    const x2 = cx + Math.cos(endRad) * R;
    const y2 = cy + Math.sin(endRad) * R;
    
    const arc = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    arc.setAttribute('d', `M ${x1} ${y1} A ${R} ${R} 0 0 1 ${x2} ${y2}`);
    arc.setAttribute('stroke', group.color);
    arc.setAttribute('stroke-width', '12');
    arc.setAttribute('fill', 'none');
    arc.setAttribute('opacity', '0.8');
    g.appendChild(arc);
  });
  
  svg.appendChild(g);
  return `Equal: ${arcSize.toFixed(1)}Â° per group`;
}

function drawTicks(svg, groups) {
  const cx = 200, cy = 200, R1 = 165, R2 = 175;
  const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
  
  let fileIdx = 0;
  groups.forEach(group => {
    for(let i = 0; i < group.count; i++) {
      // FIXED: Start at -90Â° (9 o'clock), span full 180Â° to +90Â° (3 o'clock)
      const deg = -90 + (fileIdx / (totalFiles - 1)) * 180;
      const rad = deg * Math.PI / 180;
      const x1 = cx + Math.cos(rad) * R1;
      const y1 = cy + Math.sin(rad) * R1;
      const x2 = cx + Math.cos(rad) * R2;
      const y2 = cy + Math.sin(rad) * R2;
      
      const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      tick.setAttribute('x1', x1);
      tick.setAttribute('y1', y1);
      tick.setAttribute('x2', x2);
      tick.setAttribute('y2', y2);
      tick.setAttribute('stroke', group.color);
      tick.setAttribute('stroke-width', '3');
      g.appendChild(tick);
      
      fileIdx++;
    }
  });
  
  svg.appendChild(g);
  return `Ticks: ${totalFiles} marks, -90Â° to +90Â° (full 180Â°)`;
}

function drawHybrid(svg, groups) {
  const cx = 200, cy = 200;
  const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
  
  // Thin arcs
  groups.forEach(group => {
    const startDeg = -90 + (group.start / (totalFiles - 1)) * 180;
    const endDeg = -90 + (group.end / (totalFiles - 1)) * 180;
    const startRad = startDeg * Math.PI / 180;
    const endRad = endDeg * Math.PI / 180;
    const R = 170;
    
    const x1 = cx + Math.cos(startRad) * R;
    const y1 = cy + Math.sin(startRad) * R;
    const x2 = cx + Math.cos(endRad) * R;
    const y2 = cy + Math.sin(endRad) * R;
    
    const arc = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    arc.setAttribute('d', `M ${x1} ${y1} A ${R} ${R} 0 0 1 ${x2} ${y2}`);
    arc.setAttribute('stroke', group.color);
    arc.setAttribute('stroke-width', '6');
    arc.setAttribute('fill', 'none');
    arc.setAttribute('opacity', '0.4');
    g.appendChild(arc);
  });
  
  // Ticks
  let fileIdx = 0;
  groups.forEach(group => {
    for(let i = 0; i < group.count; i++) {
      const deg = -90 + (fileIdx / (totalFiles - 1)) * 180;
      const rad = deg * Math.PI / 180;
      const R1 = 165, R2 = 175;
      const x1 = cx + Math.cos(rad) * R1;
      const y1 = cy + Math.sin(rad) * R1;
      const x2 = cx + Math.cos(rad) * R2;
      const y2 = cy + Math.sin(rad) * R2;
      
      const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      tick.setAttribute('x1', x1);
      tick.setAttribute('y1', y1);
      tick.setAttribute('x2', x2);
      tick.setAttribute('y2', y2);
      tick.setAttribute('stroke', group.color);
      tick.setAttribute('stroke-width', '2');
      g.appendChild(tick);
      
      fileIdx++;
    }
  });
  
  svg.appendChild(g);
  return `Hybrid: Bands + ${totalFiles} ticks`;
}

function drawGradient(svg, groups) {
  const cx = 200, cy = 200, R = 170;
  const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
  
  // Create gradient
  const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
  const grad = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
  grad.setAttribute('id', 'arcGrad');
  grad.setAttribute('x1', '0%');
  grad.setAttribute('y1', '0%');
  grad.setAttribute('x2', '100%');
  grad.setAttribute('y2', '0%');
  
  groups.forEach((group, i) => {
    const offset = (i / (groups.length - 1)) * 100;
    const stop = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
    stop.setAttribute('offset', `${offset}%`);
    stop.setAttribute('stop-color', group.color);
    grad.appendChild(stop);
  });
  
  defs.appendChild(grad);
  svg.appendChild(defs);
  
  // Single arc with gradient
  const startRad = -90 * Math.PI / 180;
  const endRad = 90 * Math.PI / 180;
  const x1 = cx + Math.cos(startRad) * R;
  const y1 = cy + Math.sin(startRad) * R;
  const x2 = cx + Math.cos(endRad) * R;
  const y2 = cy + Math.sin(endRad) * R;
  
  const arc = document.createElementNS('http://www.w3.org/2000/svg', 'path');
  arc.setAttribute('d', `M ${x1} ${y1} A ${R} ${R} 0 0 1 ${x2} ${y2}`);
  arc.setAttribute('stroke', 'url(#arcGrad)');
  arc.setAttribute('stroke-width', '12');
  arc.setAttribute('fill', 'none');
  arc.setAttribute('opacity', '0.8');
  g.appendChild(arc);
  
  svg.appendChild(g);
  return `Gradient: Smooth ${groups.length}-color blend`;
}

function render(svgId, mode) {
  const svg = document.getElementById(svgId);
  svg.innerHTML = '';
  
  // Background
  const bg = document.createElementNS('http://www.w3.org/2000/svg', 'path');
  bg.setAttribute('d', 'M 30,200 A 170,170 0 0 1 370,200');
  bg.setAttribute('stroke', '#333');
  bg.setAttribute('stroke-width', '2');
  bg.setAttribute('fill', 'none');
  svg.appendChild(bg);
  
  let stats = '';
  switch(mode) {
    case 'proportional': stats = drawProportional(svg, testFiles); break;
    case 'equal': stats = drawEqual(svg, testFiles); break;
    case 'ticks': stats = drawTicks(svg, testFiles); break;
    case 'hybrid': stats = drawHybrid(svg, testFiles); break;
    case 'gradient': stats = drawGradient(svg, testFiles); break;
  }
  
  // Needle
  const needle = document.createElementNS('http://www.w3.org/2000/svg', 'line');
  needle.setAttribute('x1', '200');
  needle.setAttribute('y1', '200');
  needle.setAttribute('x2', '30');
  needle.setAttribute('y2', '200');
  needle.setAttribute('stroke', '#f00');
  needle.setAttribute('stroke-width', '3');
  svg.appendChild(needle);
  
  return stats;
}

function update() {
  const currentStats = render('current', 'proportional');
  const previewStats = render('preview', currentMode);
  document.getElementById('currentStats').textContent = currentStats;
  document.getElementById('previewStats').textContent = previewStats;
}

// Event listeners
document.querySelectorAll('.option').forEach(opt => {
  opt.addEventListener('click', () => {
    document.querySelectorAll('.option').forEach(o => o.classList.remove('active'));
    opt.classList.add('active');
    currentMode = opt.dataset.mode;
    update();
  });
});

function applyToRadio() {
  alert(`Apply "${currentMode}" mode to radio.html\n\nCode will be generated...`);
}

function exportSVG() {
  const svg = document.getElementById('preview').outerHTML;
  const blob = new Blob([svg], {type: 'image/svg+xml'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `arc-design-${currentMode}.svg`;
  a.click();
}

update();
</script>

</body>
</html>
